<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0"><title>Base ancestor of CFVariable and CFArray — CFVariableBase • ncdfCF</title><!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.7.1/jquery.min.js" integrity="sha512-v2CJ7UaYy4JwqLDIrZUI/4hqeoQieOmAZNXBeQyjo21dadnwR+8ZaIJVT8EE2iyI61OV8e6M8PP2/4hpQINQ/g==" crossorigin="anonymous" referrerpolicy="no-referrer"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous"><script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css"><script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous"><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet"><script src="../pkgdown.js"></script><meta property="og:title" content="Base ancestor of CFVariable and CFArray — CFVariableBase"><meta property="og:description" content="This class is a basic ancestor to CFVariable and CFArray. It
should not be instantiated directly, use the descendant classes instead.
This class provides access to common properties of data variables and the
data they contain."><!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--></head><body data-spy="scroll" data-target="#toc">


    <div class="container template-reference-topic">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">ncdfCF</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="">0.6.1.9000</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav"><li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
    Articles

    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu"><li>
      <a href="../articles/CMEMS.html">3. How to open and visualise Copernicus Marine Data in R</a>
    </li>
    <li>
      <a href="../articles/R-CF.html">2. R and CF Metadata Conventions</a>
    </li>
    <li>
      <a href="../articles/Using_ncdfCF.html">1. Using ncdfCF</a>
    </li>
  </ul></li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul><ul class="nav navbar-nav navbar-right"><li>
  <a href="https://github.com/R-CF/ncdfCF/" class="external-link">
    <span class="fab fa-github fa-lg"></span>

  </a>
</li>
      </ul></div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->



      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Base ancestor of CFVariable and CFArray</h1>
    <small class="dont-index">Source: <a href="https://github.com/R-CF/ncdfCF/blob/HEAD/R/CFVariableBase.R" class="external-link"><code>R/CFVariableBase.R</code></a></small>
    <div class="hidden name"><code>CFVariableBase.Rd</code></div>
    </div>

    <div class="ref-description">
    <p>This class is a basic ancestor to <a href="CFVariable.html">CFVariable</a> and <a href="CFArray.html">CFArray</a>. It
should not be instantiated directly, use the descendant classes instead.</p>
<p>This class provides access to common properties of data variables and the
data they contain.</p>
    </div>


    <div id="super-class">
    <h2>Super class</h2>
    <p><code><a href="CFObject.html">ncdfCF::CFObject</a></code> -&gt; <code>CFVariableBase</code></p>
    </div>
    <div id="public-fields">
    <h2>Public fields</h2>
    <p></p><div class="r6-fields"><dl><dt><code>axes</code></dt>
<dd><p>List of instances of classes descending from <a href="CFAxis.html">CFAxis</a> that
are the axes of the data object. If there are any scalar axes, they are
listed after the axes that associate with the dimensions of the data.
(In other words, axes <code>1..n</code> describe the <code>1..n</code> data dimensions, while
any axes <code>n+1..m</code> are scalar axes.)</p></dd>


<dt><code>crs</code></dt>
<dd><p>The coordinate reference system of this variable, as an
instance of <a href="CFGridMapping.html">CFGridMapping</a>. If this field is <code>NULL</code>, the horizontal
component of the axes are in decimal degrees of longitude and latitude.</p></dd>


<dt><code>cell_measures</code></dt>
<dd><p>List of the <a href="CFCellMeasure.html">CFCellMeasure</a> objects of this
variable, if defined.</p></dd>


</dl><p></p></div>
    </div>
    <div id="active-bindings">
    <h2>Active bindings</h2>
    <p></p><div class="r6-active-bindings"><dl><dt><code>axis_names</code></dt>
<dd><p>(read-only) Return the names of all axes defined for
the data variable.</p></dd>


</dl><p></p></div>
    </div>
    <div id="methods">
    <h2>Methods</h2>

<div class="section">
<h3 id="public-methods">Public methods<a class="anchor" aria-label="anchor" href="#public-methods"></a></h3>

<ul><li><p><a href="#method-CFVariableBase-new"><code>CFVariableBase$new()</code></a></p></li>
<li><p><a href="#method-CFVariableBase-time"><code>CFVariableBase$time()</code></a></p></li>
<li><p><a href="#method-CFVariableBase-summarise"><code>CFVariableBase$summarise()</code></a></p></li>
<li><p><a href="#method-CFVariableBase-profile"><code>CFVariableBase$profile()</code></a></p></li>
<li><p><a href="#method-CFVariableBase-clone"><code>CFVariableBase$clone()</code></a></p></li>
</ul></div><p><details><summary>Inherited methods</summary><ul><li><span class="pkg-link" data-pkg="ncdfCF" data-topic="CFObject" data-id="add_coordinates"><a href="CFObject.html#method-add_coordinates"><code>ncdfCF::CFObject$add_coordinates()</code></a></span></li>
<li><span class="pkg-link" data-pkg="ncdfCF" data-topic="CFObject" data-id="append_attribute"><a href="CFObject.html#method-append_attribute"><code>ncdfCF::CFObject$append_attribute()</code></a></span></li>
<li><span class="pkg-link" data-pkg="ncdfCF" data-topic="CFObject" data-id="attribute"><a href="CFObject.html#method-attribute"><code>ncdfCF::CFObject$attribute()</code></a></span></li>
<li><span class="pkg-link" data-pkg="ncdfCF" data-topic="CFObject" data-id="delete_attribute"><a href="CFObject.html#method-delete_attribute"><code>ncdfCF::CFObject$delete_attribute()</code></a></span></li>
<li><span class="pkg-link" data-pkg="ncdfCF" data-topic="CFObject" data-id="print_attributes"><a href="CFObject.html#method-print_attributes"><code>ncdfCF::CFObject$print_attributes()</code></a></span></li>
<li><span class="pkg-link" data-pkg="ncdfCF" data-topic="CFObject" data-id="set_attribute"><a href="CFObject.html#method-set_attribute"><code>ncdfCF::CFObject$set_attribute()</code></a></span></li>
<li><span class="pkg-link" data-pkg="ncdfCF" data-topic="CFObject" data-id="write_attributes"><a href="CFObject.html#method-write_attributes"><code>ncdfCF::CFObject$write_attributes()</code></a></span></li>
</ul></details></p><hr><a id="method-CFVariableBase-new"></a><div class="section">
<h3 id="method-new-">Method <code>new()</code><a class="anchor" aria-label="anchor" href="#method-new-"></a></h3>
<p>Create an instance of this class.</p><div class="section">
<h4 id="usage">Usage<a class="anchor" aria-label="anchor" href="#usage"></a></h4>
<p></p><div class="r"><div class="sourceCode"><pre><code><span><span class="va"><a href="../reference/CFVariableBase.html">CFVariableBase</a></span><span class="op">$</span><span class="fu">new</span><span class="op">(</span><span class="va">var</span>, <span class="va">axes</span>, crs <span class="op">=</span> <span class="cn">NULL</span><span class="op">)</span></span></code></pre></div><p></p></div>
</div>

<div class="section">
<h4 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h4>
<p></p><div class="arguments"><dl><dt><code>var</code></dt>
<dd><p>The NC variable that describes this data object.</p></dd>


<dt><code>axes</code></dt>
<dd><p>A <code>list</code> of <a href="CFAxis.html">CFAxis</a> descendant instances that describe the
axes of the data object.</p></dd>


<dt><code>crs</code></dt>
<dd><p>The <a href="CFGridMapping.html">CFGridMapping</a> instance of this data object, or <code>NULL</code>
when no grid mapping is available.</p></dd>


</dl><p></p></div>
</div>
<div class="section">
<h4 id="returns">Returns<a class="anchor" aria-label="anchor" href="#returns"></a></h4>
<p>An instance of this class.</p>
</div>

</div><p></p><hr><a id="method-CFVariableBase-time"></a><div class="section">
<h3 id="method-time-">Method <code><a href="https://rspatial.github.io/terra/reference/time.html" class="external-link">time()</a></code><a class="anchor" aria-label="anchor" href="#method-time-"></a></h3>
<p>Return the time object from the axis representing time.</p><div class="section">
<h4 id="usage-1">Usage<a class="anchor" aria-label="anchor" href="#usage-1"></a></h4>
<p></p><div class="r"><div class="sourceCode"><pre><code><span><span class="va">CFVariableBase</span><span class="op">$</span><span class="fu">time</span><span class="op">(</span>want <span class="op">=</span> <span class="st">"time"</span><span class="op">)</span></span></code></pre></div><p></p></div>
</div>

<div class="section">
<h4 id="arguments-1">Arguments<a class="anchor" aria-label="anchor" href="#arguments-1"></a></h4>
<p></p><div class="arguments"><dl><dt><code>want</code></dt>
<dd><p>Character string with value "axis" or "time", indicating
what is to be returned.</p></dd>


</dl><p></p></div>
</div>
<div class="section">
<h4 id="returns-1">Returns<a class="anchor" aria-label="anchor" href="#returns-1"></a></h4>
<p>If <code>want = "axis"</code> the <a href="CFAxisTime.html">CFAxisTime</a> axis; if <code>want = "time"</code> the
<code>CFTime</code> instance of the axis, or <code>NULL</code> if the variable does not have a
"time" axis.</p>
</div>

</div><p></p><hr><a id="method-CFVariableBase-summarise"></a><div class="section">
<h3 id="method-summarise-">Method <code>summarise()</code><a class="anchor" aria-label="anchor" href="#method-summarise-"></a></h3>
<p>Summarise the temporal domain of the data, if present, to
a lower resolution, using a user-supplied aggregation function.</p>
<p>Attributes are copied from the input data variable or data array. Note
that after a summarisation the attributes may no longer be accurate.
This method tries to sanitise attributes (such as removing
<code>scale_factor</code> and <code>add_offset</code>, when present, as these will no longer
be appropriate in most cases) but the onus is on the calling code (or
yourself as interactive coder). Attributes like <code>standard_name</code> and
<code>cell_methods</code> likely require an update in the output of this method,
but the appropriate new values are not known to this method. Use
<code>CFArray$set_attribute()</code> on the result of this method to set or update
attributes as appropriate.</p><div class="section">
<h4 id="usage-2">Usage<a class="anchor" aria-label="anchor" href="#usage-2"></a></h4>
<p></p><div class="r"><div class="sourceCode"><pre><code><span><span class="va">CFVariableBase</span><span class="op">$</span><span class="fu">summarise</span><span class="op">(</span><span class="va">name</span>, <span class="va">fun</span>, <span class="va">period</span>, era <span class="op">=</span> <span class="cn">NULL</span>, <span class="va">...</span><span class="op">)</span></span></code></pre></div><p></p></div>
</div>

<div class="section">
<h4 id="arguments-2">Arguments<a class="anchor" aria-label="anchor" href="#arguments-2"></a></h4>
<p></p><div class="arguments"><dl><dt><code>name</code></dt>
<dd><p>Character vector with a name for each of the results that
<code>fun</code> returns. So if <code>fun</code> has 2 return values, this should be a vector
of length 2. Any missing values are assigned a default name of
"result_#" (with '#' being replaced with an ordinal number).</p></dd>


<dt><code>fun</code></dt>
<dd><p>A function or a symbol or character string naming a function
that will be applied to each grouping of data. The function must return
an atomic value (such as <code><a href="https://rdrr.io/r/base/sum.html" class="external-link">sum()</a></code> or <code><a href="https://rspatial.github.io/terra/reference/summarize-generics.html" class="external-link">mean()</a></code>), or a vector of atomic
values (such as <code><a href="https://rdrr.io/r/base/range.html" class="external-link">range()</a></code>). Lists and other objects are not allowed and
will throw an error that may be cryptic as there is no way that this
method can assert that <code>fun</code> behaves properly so an error will pop up
somewhere, most probably in unexpected ways. The function may also be
user-defined so you could write a wrapper around a function like <code><a href="https://rdrr.io/r/stats/lm.html" class="external-link">lm()</a></code>
to return values like the intercept or any coefficients from the object
returned by calling that function.</p></dd>


<dt><code>period</code></dt>
<dd><p>The period to summarise to. Must be one of either "day",
"dekad", "month", "quarter", "season", "year". A "quarter" is the
standard calendar quarter such as January-March, April-June, etc. A
"season" is a meteorological season, such as December-February,
March-May, etc. (any December data is from the year preceding the
January data). The period must be of lower resolution than the
resolution of the time axis.</p></dd>


<dt><code>era</code></dt>
<dd><p>Optional, integer vector of years to summarise over by the
specified <code>period</code>. The extreme values of the years will be used. This
can also be a list of multiple such  vectors. The elements in the list,
if used, should have names as these will be used to label the results.</p></dd>


<dt><code>...</code></dt>
<dd><p>Additional parameters passed on to <code>fun</code>.</p></dd>


</dl><p></p></div>
</div>
<div class="section">
<h4 id="returns-2">Returns<a class="anchor" aria-label="anchor" href="#returns-2"></a></h4>
<p>A <code>CFData</code> object, or a list thereof with as many <code>CFData</code>
objects as <code>fun</code> returns values.</p>
</div>

</div><p></p><hr><a id="method-CFVariableBase-profile"></a><div class="section">
<h3 id="method-profile-">Method <code><a href="https://rdrr.io/r/stats/profile.html" class="external-link">profile()</a></code><a class="anchor" aria-label="anchor" href="#method-profile-"></a></h3>
<p>This method extracts profiles of values from the array of
the variable, with the location along each axis to extract expressed in
coordinate values of each axis.</p><div class="section">
<h4 id="usage-3">Usage<a class="anchor" aria-label="anchor" href="#usage-3"></a></h4>
<p></p><div class="r"><div class="sourceCode"><pre><code><span><span class="va">CFVariableBase</span><span class="op">$</span><span class="fu">profile</span><span class="op">(</span><span class="va">...</span>, .names <span class="op">=</span> <span class="cn">NULL</span>, .as_table <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span></code></pre></div><p></p></div>
</div>

<div class="section">
<h4 id="arguments-3">Arguments<a class="anchor" aria-label="anchor" href="#arguments-3"></a></h4>
<p></p><div class="arguments"><dl><dt><code>...</code></dt>
<dd><p>One or more arguments of the form <code>axis = location</code>. The
"axis" part should be the name of an axis or its orientation <code>X</code>, <code>Y</code>,
<code>Z</code> or <code>T</code>. The "location" part is a vector of values representing
coordinates along the axis where to profile. A profile will be
generated for each of the elements of the "location" vectors in all
arguments.</p></dd>


<dt><code>.names</code></dt>
<dd><p>A character vector with names for the results. The names
will be used for the <code>CFArray</code> instances, or as values for the
"location" column of the <code>data.table</code> if argument <code>.as_table</code> is
<code>TRUE</code>. If the vector is shorter than the longest vector of locations
in the <code>...</code> argument, a name "location_#" will be used, with the #
replaced by the ordinal number of the vector element.</p></dd>


<dt><code>.as_table</code></dt>
<dd><p>Logical to flag if the results should be <code>CFArray</code>
instances (<code>FALSE</code>, default) or a single <code>data.table</code> (<code>TRUE</code>). If
<code>TRUE</code>, all <code>...</code> arguments must have the same number of elements, use
the same axes and the <code>data.table</code> package must be installed.</p></dd>


</dl><p></p></div>
</div>
<div class="section">
<h4 id="details">Details<a class="anchor" aria-label="anchor" href="#details"></a></h4>
<p>The coordinates along each axis to be sampled are expressed in
values of the domain of the axis. Any axes which are not passed as
arguments are extracted in whole to the result. If bounds are set on
the axis, the coordinate whose bounds envelop the requested coordinate
is selected. Otherwise, the coordinate along the axis closest to the
supplied value will be used. If the value for a specified axis falls
outside the valid range of that axis, <code>NULL</code> is returned.</p>
<p>A typical case is to extract the temporal profile as a 1D array for a
given location. In this case, use arguments for the latitude and
longitude on an X-Y-T data variable: <code>profile(lat = -24, lon = 3)</code>.
Other profiling options are also possible, such as a 2D zonal
atmospheric profile at a given longitude for an X-Y-Z data variable:
<code>profile(lon = 34)</code>.</p>
<p>Multiple profiles can be extracted in one call by supplying vectors for
the indicated axes: <code>profile(lat = c(-24, -23, -2), lon = c(5, 5, 6))</code>.
The vectors need not have the same length, unless <code>.as_table = TRUE</code>.
With unequal length vectors the result will be a <code>list</code> of <a href="CFArray.html">CFArray</a>
instances with different dimensionality and/or different axes.</p><div class="section">
<h5 id="auxiliary-coordinate-variables-cfvariable-only-">Auxiliary coordinate variables (CFVariable only)<a class="anchor" aria-label="anchor" href="#auxiliary-coordinate-variables-cfvariable-only-"></a></h5>


<p>A special case exists for variables where the horizontal dimensions (X
and Y) are not in longitude and latitude coordinates but in some other
coordinate system. In this case the netCDF resource may have so-called
<em>auxiliary coordinate variables</em>. If the data variable has such
<em>auxiliary coordinate variables</em> then they will be used automatically
if, and only if, the axes are specified as <code>X</code> and <code>Y</code>. <strong>Note</strong> that
if you want to profile the data in the original grid units, you should
specify the horizontal axis names.</p>
</div>

</div>

<div class="section">
<h4 id="returns-3">Returns<a class="anchor" aria-label="anchor" href="#returns-3"></a></h4>
<p>If <code>.as_table = FALSE</code>, a <a href="CFArray.html">CFArray</a> instance, or a list thereof
with each having one profile for each of the elements in the "location"
vectors of argument <code>...</code> and named with the respective <code>.names</code> value.
If <code>.as_table = TRUE</code>, a <code>data.table</code> with a row for each element along
all profiles, with a ".variable" column using the values from the
<code>.names</code> argument.</p>
</div>

</div><p></p><hr><a id="method-CFVariableBase-clone"></a><div class="section">
<h3 id="method-clone-">Method <code>clone()</code><a class="anchor" aria-label="anchor" href="#method-clone-"></a></h3>
<p>The objects of this class are cloneable with this method.</p><div class="section">
<h4 id="usage-4">Usage<a class="anchor" aria-label="anchor" href="#usage-4"></a></h4>
<p></p><div class="r"><div class="sourceCode"><pre><code><span><span class="va">CFVariableBase</span><span class="op">$</span><span class="fu">clone</span><span class="op">(</span>deep <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span></code></pre></div><p></p></div>
</div>

<div class="section">
<h4 id="arguments-4">Arguments<a class="anchor" aria-label="anchor" href="#arguments-4"></a></h4>
<p></p><div class="arguments"><dl><dt><code>deep</code></dt>
<dd><p>Whether to make a deep clone.</p></dd>


</dl><p></p></div>
</div>

</div>

    </div>

  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <nav id="toc" data-toggle="toc" class="sticky-top"><h2 data-toc-skip>Contents</h2>
    </nav></div>
</div>


      <footer><div class="copyright">
  <p></p><p>Developed by Patrick Van Laake.</p>
</div>

<div class="pkgdown">
  <p></p><p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.3.</p>
</div>

      </footer></div>






  </body></html>

